<!DOCTYPE HTML>
<html>
  <head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script>
      function getUrl(url) {
      	return new Promise(function(resolve,reject){
	        var webrequest = new XMLHttpRequest();
        	webrequest.open('POST', url, true);
        	//webrequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");    
	        webrequest.onload=function(){
		        resolve(webrequest.responseText);
	        };
	        webrequest.send();});
      }
      
      function loadExam(id){
        getUrl("exams/"+id+".json").then(function(r){
          var examData = JSON.parse(r);
          document.getElementsByClassName("container")[0].innerHTML="<h1>"+examData.name+"</h1><h2>Select a task</h2>";
          for(var i in examData.tasks){
            console.log(examData.tasks[i]);
          }
        });
      }
      
      function loadExams(){
      document.getElementsByClassName("container")[0].innerHTML="<h1>Select an exam</h1>";
        getUrl("exams.json").then(function(d){
          var data=JSON.parse(d);
          for(var i in data){
            var btn = document.createElement("a");
            btn.role="button";
            btn.classList.add("btn");
            btn.classList.add("btn-primary");
            btn.innerHTML=data[i].name;
            btn.onclick=function(){loadExam(data[i].id);};
            document.getElementsByClassName("container")[0].appendChild(btn);
          }
        });
      }
    </script>
  </head>
  <body onload="loadExams()">
    <div class="container"><h1>Please wait, the app is loading...</h1></div>
  </body>
